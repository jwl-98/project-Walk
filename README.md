# 🌳 산책가자 - 공원 혼잡도 확인 앱  
![Group 12 오전 1 10 20](https://github.com/user-attachments/assets/05b20fd3-d978-458c-bc7d-3accb516ccd3)


🚀 **9조 프로젝트 대시보드**에서 개발한 **산책가자**는 서울시 공원의 **실시간 혼잡도**와 **문화 행사 정보**를 제공하는 iOS 애플리케이션입니다.  
공원을 찾기 전, 원하는 분위기에 맞춰 혼잡도를 확인하고, 공원 내 진행 중인 행사를 쉽게 찾아볼수있어요!!  

![Group 15](https://github.com/user-attachments/assets/3180187a-ec21-4329-901a-712d8718125f)

![Group 16](https://github.com/user-attachments/assets/e919e4ed-2fbc-439f-8bd6-09a398cfb90e)

---

## 📌 프로젝트 개요  

- **프로젝트명**: 산책가자 (SanchaekGaja)  
- **개발자**: 순천사는 98년생 이진욱
- **개발 기간**: 📅 2025.02.03 ~ (진행중)
- **주요 기능**:  
  ✅ 공원 혼잡도 데이터 제공  
  ✅ 공원 내 문화 행사 정보 표시  
  ✅ 내 위치 기반 공원 검색 및 네비게이션  
  ✅ 공원 내 화장실 위치 확인  

---

## 👨‍💻 팀원 소개  

| 역할 | 이름 |  
|------|------|  
| iOS 개발,기획,디자인 | **이진욱** |  
---

## 🎨 와이어 프레임 & UI 기획  

### 🔍 참고한 서비스  
- 네이버 지도  
- 카카오맵  
- 애플 지도  

위 지도 앱들의 공통적인 특징인 **"일단 지도부터 보여준다"**는 컨셉을 반영하여, 산책가자에서도 **실시간 혼잡도 데이터를 직관적으로 확인할 수 있도록 심플한 UI**를 설계했습니다.  

> **"사용자가 앱을 열자마자 공원의 혼잡도를 바로 확인할 수 있도록!"**  

---

## 💡 기획 배경  

### 👀 어떻게 이 아이디어를 떠올렸나?  
- 개발 관련 커뮤니티에서 **서울시 혼잡도 API**를 활용한 앱을 보고 영감을 받음
-[홍드로이드님 스레드](https://www.threads.net/@hongdroid94/post/DErvka_pdln?xmt=AQGzhrw5EFwIw0s9gLjugMxuays9bN7VXocqYw3J6ElEpQ)
- 최근 **런닝 크루** 등의 야외 활동이 증가하는 트렌드 반영  
- 사람마다 **선호하는 공원의 분위기(한산한 공원 vs. 북적이는 공원)**가 다름  

### 🤔 그래서 이런 생각을 했어요!  
- **"공원을 가기 전, 혼잡도를 확인하면 어떨까?"**  
- **"공원 내에서 진행 중인 문화 행사 정보를 쉽게 볼 수 있다면?"**  

➡️ **이 아이디어를 바탕으로 산책가자가 탄생!** 🚀  

---

## 🏗️ 아키텍처 및 기술 스택  

### 🛠️ 아키텍처 (Architecture)  
✅ **MVC 패턴**  
- 개발 초기, 튜터님과의 논의를 통해 **절대적인 정답이 없음을 확인**  
- 비교적 화면 수가 적고, **가장 익숙한 MVC 패턴을 선택**하여 개발  

### 🛠️ 기술 스택 (Tech Stack)  

| 카테고리 | 기술 |
|------|------|
| **프로그래밍 언어** | Swift |
| **UI 프레임워크** | UIKit |
| **레이아웃** | SnapKit |
| **지도 서비스** | Google Maps SDK, Apple MapKit |
| **패키지 매니저** | CocoaPods |

---

## 🗺️ 맵 기능 구현  

### 📌 왜 Google Maps를 선택했을까?  
처음에는 **네이버 지도 API**를 고려했으나, 공원 관련 데이터(이미지, 검색 결과 등)가 부족하여 **Google Maps SDK**를 최종 선택했습니다.  

✅ **Google Maps SDK** → 공원 위치 및 이미지 제공  
✅ **Apple MapKit** → 위/경도 기반 거리 계산 및 도착 예정 시간 표시  

---

## 🔗 사용한 API & 데이터 연결  

총 **6개 API**를 사용했으며, 주요 API는 다음과 같습니다.  

| API | 설명 |
|------|------|
| **서울시 주요 공원 정보 API** | 추후 공원 내 시설 정보 제공 예정 |
| **서울시 공중화장실 정보 API** | 공원 내 화장실 위치 확인 기능 |
| **서울시 문화 행사 정보 API** | 공원 내에서 진행 중인 행사 정보 표시 |
| **Google PlaceSearch API** | 공원 이미지 및 추가 정보 제공 |

---

## 🎬 시연 영상  

📽 **[시연 영상 보기](https://youtube.com/shorts/cdyb4j8u9YM?feature=share)**

📌 **추가 기능 고려 중!**  
- 유저 맞춤 추천 기능  
- 공원 내 특정 장소 핀 기능 추가

## 🛠️ 트러블슈팅 (Troubleshooting)

### ❌ 문제: 비동기 작업에서 발생한 **Race Condition**으로 인한 앱 크래시  
공원의 혼잡도 데이터를 가져오기 위해 **for문을 사용하여 비동기 요청을 여러 번 호출**하고, 응답 데이터를 배열에 추가하는 방식으로 구현했으나, **여러 스레드가 동시에 배열을 수정하면서 충돌이 발생**하는 문제가 있었습니다.  

### 🔍 해결 과정  
1. **Thread Sanitizer**를 사용하여 **경쟁 상태(Race Condition)** 문제를 확인  
2. **DispatchGroup**을 활용하여 데이터 업데이트 시점을 조정했지만, 여전히 크래시 발생  
3. 최종적으로 **NSLock()을 적용하여 배열 추가 작업을 직렬화**함으로써 문제 해결  

### ✅ 결과  
- **스레드 충돌 없이 안정적인 데이터 처리 가능**  
- **경쟁 상태로 인한 간헐적 크래시 완전 해결**  

